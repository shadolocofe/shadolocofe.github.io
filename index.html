<!DOCTYPE html>
<html>
<head>
  <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/dev/aframe/build/aframe-ar.js"></script>
  <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  
  <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body style='margin : 0px; overflow: hidden;'>

<a-scene embedded arjs="debugUIEnabled: false;" vr-mode-ui="enabled: false">

  <!-- Primer marcador con primer video -->
  <a-marker preset="hiro">
    <video id="video1" crossOrigin="anonymous" playsinline webkitplaysinline autoplay controls muted src="1.mp4"></video>
    <a-video src="#video1" position="0 0 0" rotation="270 0 0"></a-video>
  </a-marker>

  <!-- Segundo marcador con segundo video -->
  <a-marker preset="kanji">
    <video id="video2" crossOrigin="anonymous" playsinline webkitplaysinline autoplay controls muted src="2.mp4"></video>
    <a-video src="#video2" position="0 0 0" rotation="270 0 0"></a-video>
  </a-marker>

  <a-entity camera></a-entity>
</a-scene>

<script>
  // Para el primer marcador
  var marker1 = document.querySelector("a-marker[preset='hiro']");
  marker1.addEventListener("markerFound", () => {
    console.log("Marker 1 found");
    var video1 = document.querySelector('#video1');
    video1.muted = false; // Activar sonido
    video1.play();
  });
  
  marker1.addEventListener("markerLost", () => {
    console.log("Marker 1 lost");
    var video1 = document.querySelector('#video1');
    video1.pause();
  });

  // Para el segundo marcador
  var marker2 = document.querySelector("a-marker[preset='kanji']");
  marker2.addEventListener("markerFound", () => {
    console.log("Marker 2 found");
    var video2 = document.querySelector('#video2');
    video2.muted = false; // Activar sonido
    video2.play();
  });

  marker2.addEventListener("markerLost", () => {
    console.log("Marker 2 lost");
    var video2 = document.querySelector('#video2');
    video2.pause();
  });

  // Reconocimiento de voz
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  const recognition = new SpeechRecognition();
  
  recognition.interimResults = false; // No queremos resultados intermedios
  recognition.lang = 'es-ES'; // Cambia el idioma si es necesario

  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript.toLowerCase();
    console.log("Reconocido: ", transcript);
    
    if (transcript.includes("kami pausa el video")) {
      const video1 = document.querySelector('#video1');
      const video2 = document.querySelector('#video2');
      if (!video1.paused) {
        video1.pause();
        console.log("Video 1 pausado");
      }
      if (!video2.paused) {
        video2.pause();
        console.log("Video 2 pausado");
      }
    }
  };

  recognition.onerror = (event) => {
    console.error("Error de reconocimiento de voz: ", event.error);
  };

  // Inicia el reconocimiento de voz
  recognition.start();
</script>

</body>
</html>


</body>

</html>
